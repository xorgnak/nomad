<style>
<% [ :html, :button, :input, :select ].each do |e| %>
<%= e %> { font-family: monospace; font-size: x-large; max-width: 100%; }
<% end %>
body { margin: 0; padding: 0; }
</style>

<meta name="viewport" content="initial-scale=1, maximum-scale=1">
<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
<% if params.has_key?(:u) %>
<% if params.has_key?(:x) %>
<link rel="manifest" href="<%= @path %>/manifest.webmanifest?u=<%= params[:u] %>&x=<%= params[:x] %>" crossorigin="use-credentials" />
<% else %>
<link rel="manifest" href="<%= @path %>/manifest.webmanifest?u=<%= params[:u] %>" crossorigin="use-credentials" />
<% end %>
<link rel="apple-touch-icon" sizes="57x57" href="<% @path %>/favicon.ico">
<link rel="apple-touch-icon" sizes="60x60" href="<% @path %>/favicon.ico">
<link rel="apple-touch-icon" sizes="72x72" href="<% @path %>/favicon.ico">
<link rel="apple-touch-icon" sizes="76x76" href="<% @path %>/favicon.ico">
<link rel="apple-touch-icon" sizes="114x114" href="<% @path %>/favicon.ico">
<link rel="apple-touch-icon" sizes="120x120" href="<% @path %>/favicon.ico">
<link rel="apple-touch-icon" sizes="144x144" href="<% @path %>/favicon.ico">
<link rel="apple-touch-icon" sizes="152x152" href="<% @path %>/favicon.ico">
<link rel="apple-touch-icon" sizes="180x180" href="<% @path %>/favicon.ico">
<link rel="icon" type="image/png" sizes="192x192"  href="<% @path %>/favicon.ico">
<link rel="icon" type="image/png" sizes="32x32" href="<% @path %>/favicon.ico">
<link rel="icon" type="image/png" sizes="96x96" href="<% @path %>/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="<% @path %>/favicon.ico">
<meta name="msapplication-TileColor" content="#ffffff">
<meta name="msapplication-TileImage" content="<% @path %>/favicon.ico">
<meta name="theme-color" content="#ffffff">
<% end %>

<script src='https://cdnjs.cloudflare.com/ajax/libs/paho-mqtt/1.1.0/paho-mqtt.js'></script>
<script src="https://unpkg.com/peerjs@1.3.1/dist/peerjs.min.js"></script>
<script src="https://code.jquery.com/jquery-3.6.0.js" integrity="sha256-H+K7U5CnXl1h5ywQfKtSj8PCmoN9aaq30gDh27Xc0jk=" crossorigin="anonymous"></script>

<script src="https://cdn.jsdelivr.net/npm/jquery.qrcode@1.0.3/jquery.qrcode.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/jsqr@1.4.0/dist/jsQR.min.js"></script>


<title id='banner'><%= @path %></title>
<form action='/' method='POST' enctype="multipart/form-data">
<input type='hidden' id='u' name='u' value='<%= params[:u] || @id %>'>
<% if params.has_key?(:x) %>
<input type='hidden' id='x' name='x' value='<%= params[:x] %>'>
<input type='hidden' id='ts' name='ts' value='<%= Time.now.utc.to_f %>'>
<% end %>
<%= yield %>  
</form>