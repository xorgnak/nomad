<style>
#canvas { width: 100%; height: 100%; position: fixed; left: 0; top: 0; z-index: -2; } 
#head > * { vertical-align: middle; }
#config input { width: 100%; }
button {
color: white;
text-shadow: 0px 0px 1px black;
text-shadow: 0px 0px 2px black;
background-color: rgba(0,0,0,0.0);
border: thick solid white;
padding: 3%;
}
#state > * { vertical-align: middle; }
#give > * {vertical-align: middle; }
#lvl { padding: 1%; }
.pin { padding: 2%; margin: 2%; font-size: xx-large; }
.pip { padding: 1%; margin: 1%; font-size: large; }
#badges { text-align: center; }
.badge { font-size: xx-large; padding: 2%; margin 3%; }
.open { border: thin solid white; padding: 0 3% 0 3%; font-size: small; }
.tog { border: thin solid white; padding: 0 3% 0 3%; font-size: small; }
</style>

<% @a = @user.attr.all %>

  <input type='file' id='pic-file' style='position: fixed; top: -100px;' name='config[pic]'>
  <h1 style='color: white; background-color: black; margin: 0;'>
      <button class='material-icons' type='button'
         onclick='$("#badge").toggle(); $("#display").toggle();'
	 style='background-color: black;font-size: xx-large; width: 20%; float: right;'>qr_code_2</button>
    <a href='<%= @path %>/term?u=<%= @user.id %>' class='tog material-icons'
    style='text-decoration: none; color: white; border-color: green;'>terminal</a>
     
  </h1>
  <p style="color: white; background-color: black; margin: 0;">mumble://<%= @user.attr[:name] || 'nomad' %>@<%= ENV['CLUSTER'] %>:64738/?version=1.2.0</p>
  

  <a href='<%= @path %>/term?u=<%= @user.id %>' class='tog material-icons' style='text-decoration: none; color: white; border-color: green;'>terminal</a>
  










  <div id='badge' style='background-color: black; display: none; width: 100%;'>
    <div id='qrcode-wrap' style='width: 100%; text-align: center;'>
    <% if ENV['LVLS'] != 'false' %>
      <%= @user.sash.lvl %>
      <% end %>
      <div id="qrcode" style='padding: 2%; border: thick solid black; background-color: white;'></div>
      <h1 style='width: 100%; color: white; text-align: center;'><%= @user.attr[:sponsor] || OPTS[:domain] %></h1>
      <% if ENV['LVLS'] != 'false' %>
      <%= @user.sash.badges %>
      <% end %>
    </div>
  </div>
  
  <div id='display' style='position: fixed; bottom: 0; width: 100%; color: white; background-color: black;'>
    <div id='log' class='displays' style='width: 100%; height: 100%; color: white; overflow-y: scroll; margin: 0;'>
      <% @user.log.values.to_a.reverse.each do |e| %>
      <p style='width: 100%; margin: 0;'><%= e %></p>
      <% end %>
    </div>
   
<% @user.log.clear() %>
<div>
<% CAMS.all.each_pair do |k,v| %>
<p style='width: 100%; text-align: center;'>
<a href='/dev?u=<%= @user.id %>&dev=<%= v %>'
style='background-color: white; color: black; text-decoration: none;'><%= k %></a>
</p>
<% end %>
</div>
  </div>
  <script>
  var roles = ['user', 'influencer', 'ambassdor', 'manager', 'agent', 'operator', 'owner', 'developer'];
  <% z = []; 12.times { z << rand(16).to_s(16) }; @z = z.join('') %>
    var id = '<%= QRO[@id] %>';
var sender = true;
$('#qrcode').qrcode('<%= @qr %>/<%= badge(@user.id).member %>');
$('#contact').val('<%= @user.attr[:contact] || 'contact' %>');
$('#sponsor').val('<%= @user.attr[:sponsor] || 'sponsor' %>');
$('#title').val('<%= @user.attr[:title] || 'title' %>');
function log(s) { $('#log').prepend(s + '</br>'); console.log(s); }
$(document).on('change', '#pic', function(ev) { ev.preventDefault(); });

</script>
    
